<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="format-detection" content="telephone=no">
    <title>Cart & Parking Tracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Cart & Parking Tracker</h1>

        <!-- View Toggle Controls -->
        <div class="view-toggle">
            <button class="toggle-btn active" data-view="carts">
                <span class="toggle-icon">&#x1F6D2;</span>
                Carts
            </button>
            <button class="toggle-btn" data-view="parking">
                <span class="toggle-icon">&#x1F697;</span>
                Parking
            </button>
        </div>

        <div class="forms-container">
            <div class="checkout-form" id="cartForm">
                <h2>Check Out Cart</h2>
                <form id="checkoutForm">
                    <div class="form-group">
                        <label for="staffCode">Staff Code (optional - for cross-shift sharing):</label>
                        <div class="staff-code-input">
                            <input type="text" id="staffCode" placeholder="Leave blank for local-only mode">
                            <button type="button" id="connectBtn" class="connect-btn" style="display: none;">Connect</button>
                        </div>
                    </div>
                    <div class="sync-status" id="syncStatus">
                        <span class="status-indicator local">ðŸ“± Local Mode</span>
                    </div>
                    <div class="form-group">
                        <label for="cartNumber">Cart Number:</label>
                        <input type="text" id="cartNumber" required>
                    </div>
                    <div class="form-group">
                        <label for="studentId">Student ID:</label>
                        <input type="text" id="studentId" required>
                    </div>
                    <div class="form-group">
                        <label for="phoneNumber">Phone Number:</label>
                        <input type="tel" id="phoneNumber" required>
                    </div>
                    <button type="submit">Check Out Cart</button>
                </form>
            </div>

            <div class="checkout-form" id="parkingForm">
                <h2>Issue Parking Permit</h2>
                <form id="parkingFormElement">
                    <div class="form-group">
                        <label for="licensePlate">License Plate:</label>
                        <input type="text" id="licensePlate" required>
                    </div>
                    <div class="form-group">
                        <label for="parkingPhone">Phone Number:</label>
                        <input type="tel" id="parkingPhone" required>
                    </div>
                    <button type="submit">Issue Permit</button>
                </form>
            </div>
        </div>

        <div class="checked-out-carts" id="cartsSection">
            <h2>Checked Out Carts</h2>
            <div id="cartsList"></div>
        </div>

        <div class="checked-out-carts" id="parkingSection">
            <h2>Active Parking Permits</h2>
            <div id="parkingList"></div>
        </div>

        <div class="alerts" id="alerts">
            <!-- Alert messages will appear here -->
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Firebase configuration - you'll need to replace with your config
        const firebaseConfig = {
            apiKey: "AIzaSyAMxa9ZJqi4FxtUttI13Ref5_L2ckvYee8",
            authDomain: "cartcheckout-7f297.firebaseapp.com",
            projectId: "cartcheckout-7f297",
            storageBucket: "cartcheckout-7f297.firebasestorage.app",
            messagingSenderId: "655051746646",
            appId: "1:655051746646:web:b541653e58080e6749faf7",
            measurementId: "G-T6F3BCYJ50"
            };


        // Initialize Firebase
        window.firebaseApp = initializeApp(firebaseConfig);
        window.firebaseDb = getFirestore(window.firebaseApp);

        // Initialize cart tracker after Firebase is ready
        document.addEventListener('DOMContentLoaded', () => {
            window.cartTracker = new CartTracker();
        });
    </script>
    <script src="script.js"></script>
</body>
</html>